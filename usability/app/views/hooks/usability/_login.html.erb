<% if (Setting.plugin_usability || {})['replace_login_page'] %>
  <style>
  #top-menu,
  #header,
  #sidebar,
  #footer,
  #login-form {
    display: none;
  }

  #content {
    position: absolute;
    z-index: 9999999;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    box-sizing: border-box;
    padding: 0 !important;
    min-height: 600px !important;
  }

  div.us-login-block {
    margin: 28px 0;
    margin-left: auto;
    margin-right: auto;
    border: 1px #ededed solid;
    background-color: #fff;
    box-shadow: 0 1px 3px 0 #ccc;
    border-radius: 4px;
    padding-top: 0;
  }

  div.us-login-form {
    width: 350px;
    margin: auto;
    font-family: Arial, sans-serif;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  div.us-login-form a {
    color: #0099cc;
    border-bottom-color: #0099cc;
  }
  div.us-login-form a:hover {
    color: #147dc0;
    border-bottom-color: #147dc0;
  }

  div.us-login-form div.us-hello-zone .us-hello {
    color: #818181;
    font-size: 12px;
  }
  div.us-login-form div.us-hello-zone h2 {
    color: #000;
    font-size: 17px;
    font-weight: normal;
    border: none;
    font-family: Arial, sans-serif;
  }
  div.us-login-form div.us-hello-zone .us-register a {
    font-size: 11px;
  }
  div.us-login-form .us-logo {
    text-align: center;
    margin-top: 85px;
  }
  div.us-login-form .us-login-block .us-style-top {
    padding-top: 6px;
    background-image: -webkit-linear-gradient(right, #fd0003, #980094);
    background-image: -moz-linear-gradient(right, #fd0003, #980094);
    background-image: -o-linear-gradient(right, #fd0003, #980094);
    background-image: linear-gradient(to left, #fd0003, #980094);
    border-radius: 5px 5px 0 0;
  }

  div.us-login-form .us-login-block .us-style-body {
    margin: 20px 0;
    padding: 0 20px;
  }
  div.us-login-form .us-login-block .us-style-body div {
    position: relative;
    margin-bottom: 20px;
  }
  div.us-login-form .us-login-block .us-style-body input {
    width: 100%;
    box-sizing: border-box;
  }

  div.us-login-form .us-login-block .us-style-bottom {
    background: #f7f7f7;
    border-radius: 0 0 4px 4px;
    padding: 20px;
  }

  div.us-login-form .us-promo-block {
    color: #818181;
    font-size: 10px;
    text-align: center;
  }


  div.us-login-form .us-login-block .us-style-body input.us-input {
    border-radius: 4px;
    font-size: 14px;
    padding: 8px 8px 8px 35px;
    border: 1px solid #ccc;
    box-shadow: inset 1px 1px 1px rgba(204, 204, 204, 0.5);
  }

  div.us-login-form .us-login-block .us-style-body input.us-input:focus {
    outline: none;
    border: 1px solid #77baed;
    box-shadow: 0 0 5px #77baed, inset 1px 1px 1px rgba(204, 204, 204, 0.5);
  }

  div.us-login-form .us-login-block .us-style-body input.us-input + span.fa {
    color: #000;
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
  }

  div.us-login-form .us-login-block .us-style-body input.us-input[value=''] + span.fa {
    color: #ccc;
  }

  div.us-login-form .us-login-block .us-style-body input::-webkit-input-placeholder {
    text-overflow: ellipsis;
    color: #b3b3b3;
    font-style: italic;
  }
  div.us-login-form .us-login-block .us-style-body input::-moz-placeholder {
    text-overflow: ellipsis;
    color: #b3b3b3;
    font-style: italic;
  }
  div.us-login-form .us-login-block .us-style-body input:-moz-placeholder {
    text-overflow: ellipsis;
    color: #b3b3b3;
    font-style: italic;
  }
  div.us-login-form .us-login-block .us-style-body input:-ms-input-placeholder {
    text-overflow: ellipsis;
    color: #b3b3b3;
    font-style: italic;
  }

  div.us-login-form .us-login-block .us-log-in-btn {
    border: none;
    outline: none !important;
    color: #fff;
    padding: 8px;
    cursor: pointer;

    -webkit-transition: border .25s linear, color .25s linear, background-color .25s linear;
    transition: border .25s linear, color .25s linear, background-color .25s linear;

    background: #d20067;
    background-image: -webkit-linear-gradient(bottom, #ae0055, #d20067);
    background-image: -moz-linear-gradient(bottom, #ae0055, #d20067);
    background-image: -o-linear-gradient(bottom, #ae0055, #d20067);
    background-image: linear-gradient(to top, #ae0055, #d20067);
    border-radius: 5px;

    box-shadow: 0 4px 0 #78003b;
  }
  div.us-login-form .us-login-block .us-log-in-btn:hover {
    position: relative;
    top: 2px;
    box-shadow: 0 2px 0 #78003b;
    background: #d30067;
  }

  div.us-login-form .us-login-block .us-style-body .flash {
    padding: 8px 35px 8px 14px;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
    border-radius: 4px;
    background-image: none;
    color: #B94A48;
    background-color: #F2DEDE;
    border: 1px solid #EED3D7;
  }

  .us-login-background {
    position: absolute;
    top: 65%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  </style>

  <script type="text/javascript">
    $(document).ready(function() {
      $('#login-form ').remove();

      $('#username, #password').on('change keyup input autocomplete textInput', function() {
        this.setAttribute('value', this.value ? ('<%= params[:username] %>' || '1') : '');
      }).trigger('keyup');


      $('div.us-login-form .us-login-block .us-style-body').prepend($('div.flash'));

      <% if params[:username].present? %>
        $('#password').focus();
      <% else %>
        $('#username').focus();
      <% end %>
    });
  </script>

  <%= image_tag('/plugin_assets/usability/images/login-background.png', class: 'us-login-background') %>
  <div class="us-login-form">
    <%= form_tag(signin_path) do %>
      <%= back_url_hidden_field_tag %>

      <div class="us-hello-zone">
        <div class="us-hello"><%= l(:label_us_login_hello_zone) %>:</div>
        <h2><%= Setting.app_title %></h2>
        <hr>
        <% if !User.current.logged? && Setting.self_registration? %>
          <div class="us-register">
            <%= link_to l(:label_us_login_hello_zone_register), register_path %>
          </div>
        <% end %>
      </div>

      <div class="us-logo">
        <%= link_to(image_tag('logo.png', plugin: :usability, alt: l(:label_rmplus_logo), title: l(:label_rmplus_logo), width: 75, style: 'vertical-align: bottom;'), 'http://rmplus.pro/', class: 'no_line') %>
      </div>

      <div class="us-login-block">
        <div class="us-style-top"></div>

        <div class="us-style-body">
          <div>
            <%= text_field_tag 'username', params[:username], tabindex: 2, placeholder: l(:label_us_login_input_username), class: 'us-input' %>
            <span class="fa fa-user"></span>
          </div>
          <div>
            <%= password_field_tag 'password', '', tabindex: 2, placeholder: l(:label_us_login_input_password), class: 'us-input' %>
            <span class="fa fa-unlock"></span>
          </div>
          <% if Setting.openid? %>
            <div>
              <%= text_field_tag "openid_url", nil, tabindex: 3, class: 'us-input' %>
            </div>
          <% end %>

          <input type="submit" name="login" value="<%=l(:label_us_login_submit)%>" tabindex="5" class="us-log-in-btn">
        </div>

        <div class="us-style-bottom">
          <% if Setting.autologin? %>
            <label for="autologin"><%= check_box_tag 'autologin', 1, false, tabindex: 4 %> <%= l(:label_us_login_footer_remember_me) %></label>
          <% end %>
          <% if Setting.lost_password? %>
            <%= link_to l(:label_us_login_footer_restore_password), lost_password_path, style: 'float: right;' %>
          <% end %>
          <div class="C"></div>
        </div>
      </div>

      <div class="us-promo-block">
        <%= l(:label_us_login_footer_text).html_safe %>
      </div>
    <% end %>
  </div>

<% end %>